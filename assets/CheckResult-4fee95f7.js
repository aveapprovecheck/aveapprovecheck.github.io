import{C as dt,_ as ht,g as ft,f as pt,b as vt,r as Q,D as _t,o as mt,j,k as U,l as z,n as l,c as M,w as T,p as v,t as $,F as it,E as at,x as rt,G as $t,q as gt,H as yt,y as K,v as kt,I as wt,z as Ct,A as Mt}from"./index-1b9ec9cd.js";import{A as At,_ as ct,a as bt,f as lt,b as Dt}from"./ApproveTypeTab-d63d90ab.js";var ut={exports:{}};(function(F,k){(function(B,m){F.exports=m()})(dt,function(){var B=1e3,m=6e4,W=36e5,I="millisecond",O="second",b="minute",D="hour",x="day",R="week",A="month",X="quarter",S="year",Y="date",J="Invalid Date",Z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,tt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,et={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var s=["th","st","nd","rd"],t=e%100;return"["+e+(s[(t-20)%10]||s[t]||s[0])+"]"}},E=function(e,s,t){var o=String(e);return!o||o.length>=s?e:""+Array(s+1-o.length).join(t)+e},p={s:E,z:function(e){var s=-e.utcOffset(),t=Math.abs(s),o=Math.floor(t/60),n=t%60;return(s<=0?"+":"-")+E(o,2,"0")+":"+E(n,2,"0")},m:function e(s,t){if(s.date()<t.date())return-e(t,s);var o=12*(t.year()-s.year())+(t.month()-s.month()),n=s.clone().add(o,A),a=t-n<0,i=s.clone().add(o+(a?-1:1),A);return+(-(o+(t-n)/(a?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:A,y:S,w:R,d:x,D:Y,h:D,m:b,s:O,ms:I,Q:X}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},c="en",h={};h[c]=et;var g=function(e){return e instanceof L},w=function e(s,t,o){var n;if(!s)return c;if(typeof s=="string"){var a=s.toLowerCase();h[a]&&(n=a),t&&(h[a]=t,n=a);var i=s.split("-");if(!n&&i.length>1)return e(i[0])}else{var u=s.name;h[u]=s,n=u}return!o&&n&&(c=n),n||!o&&c},d=function(e,s){if(g(e))return e.clone();var t=typeof s=="object"?s:{};return t.date=e,t.args=arguments,new L(t)},r=p;r.l=w,r.i=g,r.w=function(e,s){return d(e,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var L=function(){function e(t){this.$L=w(t.locale,null,!0),this.parse(t)}var s=e.prototype;return s.parse=function(t){this.$d=function(o){var n=o.date,a=o.utc;if(n===null)return new Date(NaN);if(r.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var i=n.match(Z);if(i){var u=i[2]-1||0,_=(i[7]||"0").substring(0,3);return a?new Date(Date.UTC(i[1],u,i[3]||1,i[4]||0,i[5]||0,i[6]||0,_)):new Date(i[1],u,i[3]||1,i[4]||0,i[5]||0,i[6]||0,_)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return r},s.isValid=function(){return this.$d.toString()!==J},s.isSame=function(t,o){var n=d(t);return this.startOf(o)<=n&&n<=this.endOf(o)},s.isAfter=function(t,o){return d(t)<this.startOf(o)},s.isBefore=function(t,o){return this.endOf(o)<d(t)},s.$g=function(t,o,n){return r.u(t)?this[o]:this.set(n,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,o){var n=this,a=!!r.u(o)||o,i=r.p(t),u=function(G,C){var V=r.w(n.$u?Date.UTC(n.$y,C,G):new Date(n.$y,C,G),n);return a?V:V.endOf(x)},_=function(G,C){return r.w(n.toDate()[G].apply(n.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(C)),n)},f=this.$W,y=this.$M,H=this.$D,N="set"+(this.$u?"UTC":"");switch(i){case S:return a?u(1,0):u(31,11);case A:return a?u(1,y):u(0,y+1);case R:var q=this.$locale().weekStart||0,P=(f<q?f+7:f)-q;return u(a?H-P:H+(6-P),y);case x:case Y:return _(N+"Hours",0);case D:return _(N+"Minutes",1);case b:return _(N+"Seconds",2);case O:return _(N+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,o){var n,a=r.p(t),i="set"+(this.$u?"UTC":""),u=(n={},n[x]=i+"Date",n[Y]=i+"Date",n[A]=i+"Month",n[S]=i+"FullYear",n[D]=i+"Hours",n[b]=i+"Minutes",n[O]=i+"Seconds",n[I]=i+"Milliseconds",n)[a],_=a===x?this.$D+(o-this.$W):o;if(a===A||a===S){var f=this.clone().set(Y,1);f.$d[u](_),f.init(),this.$d=f.set(Y,Math.min(this.$D,f.daysInMonth())).$d}else u&&this.$d[u](_);return this.init(),this},s.set=function(t,o){return this.clone().$set(t,o)},s.get=function(t){return this[r.p(t)]()},s.add=function(t,o){var n,a=this;t=Number(t);var i=r.p(o),u=function(y){var H=d(a);return r.w(H.date(H.date()+Math.round(y*t)),a)};if(i===A)return this.set(A,this.$M+t);if(i===S)return this.set(S,this.$y+t);if(i===x)return u(1);if(i===R)return u(7);var _=(n={},n[b]=m,n[D]=W,n[O]=B,n)[i]||1,f=this.$d.getTime()+t*_;return r.w(f,this)},s.subtract=function(t,o){return this.add(-1*t,o)},s.format=function(t){var o=this,n=this.$locale();if(!this.isValid())return n.invalidDate||J;var a=t||"YYYY-MM-DDTHH:mm:ssZ",i=r.z(this),u=this.$H,_=this.$m,f=this.$M,y=n.weekdays,H=n.months,N=function(C,V,ot,nt){return C&&(C[V]||C(o,a))||ot[V].slice(0,nt)},q=function(C){return r.s(u%12||12,C,"0")},P=n.meridiem||function(C,V,ot){var nt=C<12?"AM":"PM";return ot?nt.toLowerCase():nt},G={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:r.s(f+1,2,"0"),MMM:N(n.monthsShort,f,H,3),MMMM:N(H,f),D:this.$D,DD:r.s(this.$D,2,"0"),d:String(this.$W),dd:N(n.weekdaysMin,this.$W,y,2),ddd:N(n.weekdaysShort,this.$W,y,3),dddd:y[this.$W],H:String(u),HH:r.s(u,2,"0"),h:q(1),hh:q(2),a:P(u,_,!0),A:P(u,_,!1),m:String(_),mm:r.s(_,2,"0"),s:String(this.$s),ss:r.s(this.$s,2,"0"),SSS:r.s(this.$ms,3,"0"),Z:i};return a.replace(tt,function(C,V){return V||G[C]||i.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,o,n){var a,i=r.p(o),u=d(t),_=(u.utcOffset()-this.utcOffset())*m,f=this-u,y=r.m(this,u);return y=(a={},a[S]=y/12,a[A]=y,a[X]=y/3,a[R]=(f-_)/6048e5,a[x]=(f-_)/864e5,a[D]=f/W,a[b]=f/m,a[O]=f/B,a)[i]||f,n?y:r.a(y)},s.daysInMonth=function(){return this.endOf(A).$D},s.$locale=function(){return h[this.$L]},s.locale=function(t,o){if(!t)return this.$L;var n=this.clone(),a=w(t,o,!0);return a&&(n.$L=a),n},s.clone=function(){return r.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},e}(),st=L.prototype;return d.prototype=st,[["$ms",I],["$s",O],["$m",b],["$H",D],["$W",x],["$M",A],["$y",S],["$D",Y]].forEach(function(e){st[e[1]]=function(s){return this.$g(s,e[0],e[1])}}),d.extend=function(e,s){return e.$i||(e(s,L,d),e.$i=!0),d},d.locale=w,d.isDayjs=g,d.unix=function(e){return d(1e3*e)},d.en=h[c],d.Ls=h,d.p={},d})})(ut);const St=ut.exports;const xt=F=>(Ct("data-v-8b6f7d58"),F=F(),Mt(),F),Tt={class:"check-result"},It={class:"result-list"},Ot={key:0,class:"token-list"},Lt={class:"text"},Nt={class:"item"},Yt={class:"right-content"},Ht={class:"content-item"},Vt={class:"left"},Wt={class:"right"},jt={class:"content-item"},Ut={class:"left"},Ft={class:"right"},Bt=["onClick"],Rt={key:0,class:"content-item"},Gt={class:"left"},zt={class:"right"},Jt={class:"content-item"},Zt={class:"left"},Et={class:"right"},qt={class:"content-item"},Pt={class:"left"},Qt={class:"right"},Kt={class:"operate"},Xt=xt(()=>l("div",{class:"approve-count"},null,-1)),te={class:"cancel-approve"},ee={class:"check-all"},se={key:1,class:"NFT-list"},ne={class:"comming-soon-text"},oe={class:"content"},ie={class:"transfer-icon"},ae={class:"title"},re={class:"btn"},ce={__name:"CheckResult",setup(F){const{t:k}=ft(),B=pt("global"),m=vt(),W=Q([]),I=Q(!1),O=Q(null),b=Q([]),D=Q(!1);function x(){let p=B.cfg.allowChainList.find(c=>c.chainId==m.chainId);for(let c of b.value)console.log(c),p?window.open(p.txNetwork+c,c):rt(k("unsupportedNetwork"))}function R(){}function A(){O.value.toggleAll(I.value)}function X(p){p.length==m.approvalList.length?I.value=!0:I.value=!1}async function S(p){console.log(Z);let c=await at.wallet.getAccount();if(Z.toLowerCase()!=c.toLowerCase()){rt(k("switchWalletAddress"));return}if(m.getChainId(),m.chainId==-1)return;console.log(p instanceof Array);let h=[];if(p instanceof Array)for(let g of p){let w=g.split("-")[0],d=g.split("-")[1],r=m.approvalList.find(L=>L.tokenAddress==w&&L.approvedContractAddress==d);h.push(r)}else{let g=p.split("-")[0],w=p.split("-")[1],d=m.approvalList.find(r=>r.tokenAddress==g&&r.approvedContractAddress==w);h.push(d)}console.log(h),Y(h)}async function Y(p){console.log(p),b.value=[];let c=[];for(let h of p)try{let g=await at.wallet.approveMinAmount(h.tokenAddress,h.approvedContractAddress);b.value.push(g.hash),c.push(g.wait())}catch{continue}b.value.length!=0&&(D.value=!0,Promise.all(c).then(h=>{console.log(h);let g=0;for(let w of h)w.status==1&&g++;g>0&&et()}))}const J=_t(),Z=J.params.walletAddress,tt=J.params.chainId;async function et(){const p=$t({forbidClick:!0,duration:0});await m.getApprovalList(tt,Z),p.close()}function E(p){let c=B.cfg.allowChainList.find(h=>h.chainId==tt);c?window.open(c.addressNetwork+p,"_blank"):Toast(k("unsupportedNetwork"))}return mt(()=>{m.hasCheckData||et()}),(p,c)=>{const h=j("van-nav-bar"),g=j("van-empty"),w=j("van-image"),d=j("van-button"),r=j("van-checkbox"),L=j("van-checkbox-group"),st=j("van-dialog");return U(),z(it,null,[l("div",Tt,[M(h,{class:"nav-bar"},{title:T(()=>[M(At,{type:v(m).approveType,"onUpdate:type":c[0]||(c[0]=e=>v(m).approveType=e),onSelectType:R},null,8,["type"])]),_:1}),l("div",It,[v(m).approveType==0?(U(),z("div",Ot,[M(L,{modelValue:W.value,"onUpdate:modelValue":c[2]||(c[2]=e=>W.value=e),ref_key:"checkboxGroup",ref:O,onChange:X},{default:T(()=>[v(m).approvalList.length==0?(U(),gt(g,{key:0,class:"empty-box"},{image:T(()=>[M(ct,{class:"icon",name:"emptyHistory"}),l("div",Lt,$(p.$t("noRecord")),1)]),_:1})):(U(!0),z(it,{key:1},yt(v(m).approvalList,e=>(U(),z("div",Nt,[M(r,{class:"checkbox",name:e.tokenAddress+"-"+e.approvedContractAddress},{default:T(()=>[l("div",Yt,[l("div",Ht,[l("div",Vt,$(v(k)("approveToken")),1),l("div",Wt,[M(w,{class:"chain-icon",round:"",src:v(bt)("bsc",e.tokenAddress.toLowerCase())},null,8,["src"]),l("div",null,$(`${e.tokenSymbol}(${v(lt)(e.tokenAddress)})`),1)])]),l("div",jt,[l("div",Ut,$(v(k)("approveContract")),1),l("div",Ft,[M(w,{class:"chain-icon",round:"",src:v(Dt)(e.approvedContractAddress.toLowerCase(),18)},null,8,["src"]),K(" "+$(e.tag)+" ",1),l("div",{class:"address",onClick:s=>E(e.approvedContractAddress)},$(`(${v(lt)(e.approvedContractAddress)})`),9,Bt)])]),e.approvedContractName?(U(),z("div",Rt,[l("div",Gt,$(v(k)("contractName")),1),l("div",zt,$(e.approvedContractName),1)])):kt("",!0),l("div",Jt,[l("div",Zt,$(v(k)("approveQuantity")),1),l("div",Et,$(e.approvedAmount),1)]),l("div",qt,[l("div",Pt,$(v(k)("approveTime")),1),l("div",Qt,$(v(St).unix(e.approvedTime).format("YYYY-MM-DD HH:mm:ss")),1)]),l("div",Kt,[Xt,l("div",te,[M(d,{class:"btn",plain:"",type:"primary",onClick:[s=>S(e.tokenAddress+"-"+e.approvedContractAddress),c[1]||(c[1]=wt(()=>{},["stop"]))]},{default:T(()=>[K($(v(k)("cancelApprove")),1)]),_:2},1032,["onClick"])])])])]),_:2},1032,["name"])]))),256))]),_:1},8,["modelValue"]),l("div",ee,[l("div",null,[M(r,{class:"checkbox",modelValue:I.value,"onUpdate:modelValue":c[3]||(c[3]=e=>I.value=e),onClick:A},{default:T(()=>[K($(v(k)("checkAll")),1)]),_:1},8,["modelValue"]),M(d,{class:"btn",type:"primary",disabled:W.value.length==0,onClick:c[4]||(c[4]=e=>S(W.value))},{default:T(()=>[K($(v(k)("batchCancel")),1)]),_:1},8,["disabled"])])])])):(U(),z("div",se,[M(w,{class:"comming-soon-icon",src:"/assets/images/comming-soon.png"}),l("div",ne,$(v(k)("comingSoon")),1)]))])]),M(st,{class:"approve-success-dialog",show:D.value,"onUpdate:show":c[5]||(c[5]=e=>D.value=e),onClose:c[6]||(c[6]=e=>D.value=!1),"close-on-click-overlay":""},{footer:T(()=>[l("div",re,[M(d,{class:"copy-btn",type:"primary",onClick:x},{default:T(()=>[K($(v(k)("viewBlockChain")),1)]),_:1})])]),default:T(()=>[l("div",oe,[l("div",ie,[M(ct,{name:"createSuccess"})]),l("div",ae,$(v(k)("cancelApproveWait")),1)])]),_:1},8,["show"])],64)}}},de=ht(ce,[["__scopeId","data-v-8b6f7d58"]]);export{de as default};
