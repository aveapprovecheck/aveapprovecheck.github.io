import{C as dt,_ as ht,g as ft,f as pt,b as vt,r as Q,D as _t,o as mt,j as U,k as z,l as K,n as l,c as M,w as I,p as m,t as k,F as it,E as at,x as rt,G as $t,q as gt,H as yt,y as st,I as kt,z as wt,A as Mt}from"./index-60992bea.js";import{A as Ct,_ as ct,a as At,f as lt,b as Dt}from"./ApproveTypeTab-01e2a0cc.js";var ut={exports:{}};(function(F,C){(function(J,$){F.exports=$()})(dt,function(){var J=1e3,$=6e4,j=36e5,L="millisecond",Y="second",b="minute",x="hour",O="day",B="week",A="month",X="quarter",T="year",N="date",Z="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,nt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,tt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var s=["th","st","nd","rd"],t=n%100;return"["+n+(s[(t-20)%10]||s[t]||s[0])+"]"}},p=function(n,s,t){var o=String(n);return!o||o.length>=s?n:""+Array(s+1-o.length).join(t)+n},u={s:p,z:function(n){var s=-n.utcOffset(),t=Math.abs(s),o=Math.floor(t/60),e=t%60;return(s<=0?"+":"-")+p(o,2,"0")+":"+p(e,2,"0")},m:function n(s,t){if(s.date()<t.date())return-n(t,s);var o=12*(t.year()-s.year())+(t.month()-s.month()),e=s.clone().add(o,A),a=t-e<0,i=s.clone().add(o+(a?-1:1),A);return+(-(o+(t-e)/(a?e-i:i-e))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:A,y:T,w:B,d:O,D:N,h:x,m:b,s:Y,ms:L,Q:X}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},g="en",v={};v[g]=tt;var D=function(n){return n instanceof R},S=function n(s,t,o){var e;if(!s)return g;if(typeof s=="string"){var a=s.toLowerCase();v[a]&&(e=a),t&&(v[a]=t,e=a);var i=s.split("-");if(!e&&i.length>1)return n(i[0])}else{var c=s.name;v[c]=s,e=c}return!o&&e&&(g=e),e||!o&&g},d=function(n,s){if(D(n))return n.clone();var t=typeof s=="object"?s:{};return t.date=n,t.args=arguments,new R(t)},r=u;r.l=S,r.i=D,r.w=function(n,s){return d(n,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var R=function(){function n(t){this.$L=S(t.locale,null,!0),this.parse(t)}var s=n.prototype;return s.parse=function(t){this.$d=function(o){var e=o.date,a=o.utc;if(e===null)return new Date(NaN);if(r.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var i=e.match(E);if(i){var c=i[2]-1||0,_=(i[7]||"0").substring(0,3);return a?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,_)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,_)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return r},s.isValid=function(){return this.$d.toString()!==Z},s.isSame=function(t,o){var e=d(t);return this.startOf(o)<=e&&e<=this.endOf(o)},s.isAfter=function(t,o){return d(t)<this.startOf(o)},s.isBefore=function(t,o){return this.endOf(o)<d(t)},s.$g=function(t,o,e){return r.u(t)?this[o]:this.set(e,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,o){var e=this,a=!!r.u(o)||o,i=r.p(t),c=function(G,w){var W=r.w(e.$u?Date.UTC(e.$y,w,G):new Date(e.$y,w,G),e);return a?W:W.endOf(O)},_=function(G,w){return r.w(e.toDate()[G].apply(e.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(w)),e)},f=this.$W,y=this.$M,V=this.$D,H="set"+(this.$u?"UTC":"");switch(i){case T:return a?c(1,0):c(31,11);case A:return a?c(1,y):c(0,y+1);case B:var q=this.$locale().weekStart||0,P=(f<q?f+7:f)-q;return c(a?V-P:V+(6-P),y);case O:case N:return _(H+"Hours",0);case x:return _(H+"Minutes",1);case b:return _(H+"Seconds",2);case Y:return _(H+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,o){var e,a=r.p(t),i="set"+(this.$u?"UTC":""),c=(e={},e[O]=i+"Date",e[N]=i+"Date",e[A]=i+"Month",e[T]=i+"FullYear",e[x]=i+"Hours",e[b]=i+"Minutes",e[Y]=i+"Seconds",e[L]=i+"Milliseconds",e)[a],_=a===O?this.$D+(o-this.$W):o;if(a===A||a===T){var f=this.clone().set(N,1);f.$d[c](_),f.init(),this.$d=f.set(N,Math.min(this.$D,f.daysInMonth())).$d}else c&&this.$d[c](_);return this.init(),this},s.set=function(t,o){return this.clone().$set(t,o)},s.get=function(t){return this[r.p(t)]()},s.add=function(t,o){var e,a=this;t=Number(t);var i=r.p(o),c=function(y){var V=d(a);return r.w(V.date(V.date()+Math.round(y*t)),a)};if(i===A)return this.set(A,this.$M+t);if(i===T)return this.set(T,this.$y+t);if(i===O)return c(1);if(i===B)return c(7);var _=(e={},e[b]=$,e[x]=j,e[Y]=J,e)[i]||1,f=this.$d.getTime()+t*_;return r.w(f,this)},s.subtract=function(t,o){return this.add(-1*t,o)},s.format=function(t){var o=this,e=this.$locale();if(!this.isValid())return e.invalidDate||Z;var a=t||"YYYY-MM-DDTHH:mm:ssZ",i=r.z(this),c=this.$H,_=this.$m,f=this.$M,y=e.weekdays,V=e.months,H=function(w,W,ot,et){return w&&(w[W]||w(o,a))||ot[W].slice(0,et)},q=function(w){return r.s(c%12||12,w,"0")},P=e.meridiem||function(w,W,ot){var et=w<12?"AM":"PM";return ot?et.toLowerCase():et},G={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:r.s(f+1,2,"0"),MMM:H(e.monthsShort,f,V,3),MMMM:H(V,f),D:this.$D,DD:r.s(this.$D,2,"0"),d:String(this.$W),dd:H(e.weekdaysMin,this.$W,y,2),ddd:H(e.weekdaysShort,this.$W,y,3),dddd:y[this.$W],H:String(c),HH:r.s(c,2,"0"),h:q(1),hh:q(2),a:P(c,_,!0),A:P(c,_,!1),m:String(_),mm:r.s(_,2,"0"),s:String(this.$s),ss:r.s(this.$s,2,"0"),SSS:r.s(this.$ms,3,"0"),Z:i};return a.replace(nt,function(w,W){return W||G[w]||i.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,o,e){var a,i=r.p(o),c=d(t),_=(c.utcOffset()-this.utcOffset())*$,f=this-c,y=r.m(this,c);return y=(a={},a[T]=y/12,a[A]=y,a[X]=y/3,a[B]=(f-_)/6048e5,a[O]=(f-_)/864e5,a[x]=f/j,a[b]=f/$,a[Y]=f/J,a)[i]||f,e?y:r.a(y)},s.daysInMonth=function(){return this.endOf(A).$D},s.$locale=function(){return v[this.$L]},s.locale=function(t,o){if(!t)return this.$L;var e=this.clone(),a=S(t,o,!0);return a&&(e.$L=a),e},s.clone=function(){return r.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},n}(),h=R.prototype;return d.prototype=h,[["$ms",L],["$s",Y],["$m",b],["$H",x],["$W",O],["$M",A],["$y",T],["$D",N]].forEach(function(n){h[n[1]]=function(s){return this.$g(s,n[0],n[1])}}),d.extend=function(n,s){return n.$i||(n(s,R,d),n.$i=!0),d},d.locale=S,d.isDayjs=D,d.unix=function(n){return d(1e3*n)},d.en=v[g],d.Ls=v,d.p={},d})})(ut);const St=ut.exports;const bt=F=>(wt("data-v-4d54a4d6"),F=F(),Mt(),F),xt={class:"check-result"},Tt={class:"result-list"},Ot={key:0,class:"token-list"},It={class:"text"},Lt={class:"item"},Yt={class:"right-content"},Ht={class:"content-item"},Nt={class:"left"},Vt={class:"right"},Wt={class:"content-item"},jt={class:"left"},Ut={class:"right"},Ft={class:"content-item"},Bt={class:"left"},Rt={class:"right"},Gt={class:"content-item"},zt={class:"left"},Jt={class:"right"},Zt={class:"operate"},Et=bt(()=>l("div",{class:"approve-count"},null,-1)),qt={class:"cancel-approve"},Pt={class:"check-all"},Qt={key:1,class:"NFT-list"},Kt={class:"comming-soon-text"},Xt={class:"content"},te={class:"transfer-icon"},ee={class:"title"},se={class:"btn"},ne={__name:"CheckResult",setup(F){const{t:C}=ft(),J=pt("global"),$=vt(),j=Q([]),L=Q(!1),Y=Q(null),b=Q([]),x=Q(!1);function O(){let p=J.cfg.allowChainList.find(u=>u.chainId==$.chainId);for(let u of b.value)console.log(u),p?window.open(p.txNetwork+u,u):rt(C("unsupportedNetwork"))}function B(){}function A(){Y.value.toggleAll(L.value)}function X(p){p.length==$.approvalList.length?L.value=!0:L.value=!1}async function T(p){console.log(E);let u=await at.wallet.getAccount();if(E!=u){rt(C("switchWalletAddress"));return}if(!$.checkChainNet())return;console.log(p instanceof Array);let g=[];if(p instanceof Array)for(let v of p){let D=v.split("-")[0],S=v.split("-")[1],d=$.approvalList.find(r=>r.tokenAddress==D&&r.approvedContractAddress==S);g.push(d)}else{let v=p.split("-")[0],D=p.split("-")[1],S=$.approvalList.find(d=>d.tokenAddress==v&&d.approvedContractAddress==D);g.push(S)}console.log(g),N(g)}async function N(p){console.log(p),b.value=[];let u=[];for(let g of p)try{let v=await at.wallet.approveMinAmount(g.tokenAddress,g.approvedContractAddress);b.value.push(v.hash),u.push(v.wait())}catch{continue}b.value.length!=0&&(x.value=!0,Promise.all(u).then(g=>{console.log(g);let v=0;for(let D of g)D.status==1&&v++;v>0&&tt()}))}const Z=_t(),E=Z.params.walletAddress,nt=Z.params.chainId;async function tt(){const p=$t({forbidClick:!0,duration:0});await $.getApprovalList(nt,E),p.close()}return mt(()=>{$.hasCheckData||tt()}),(p,u)=>{const g=U("van-nav-bar"),v=U("van-empty"),D=U("van-image"),S=U("van-button"),d=U("van-checkbox"),r=U("van-checkbox-group"),R=U("van-dialog");return z(),K(it,null,[l("div",xt,[M(g,{class:"nav-bar"},{title:I(()=>[M(Ct,{type:m($).approveType,"onUpdate:type":u[0]||(u[0]=h=>m($).approveType=h),onSelectType:B},null,8,["type"])]),_:1}),l("div",Tt,[m($).approveType==0?(z(),K("div",Ot,[M(r,{modelValue:j.value,"onUpdate:modelValue":u[2]||(u[2]=h=>j.value=h),ref_key:"checkboxGroup",ref:Y,onChange:X},{default:I(()=>[m($).approvalList.length==0?(z(),gt(v,{key:0,class:"empty-box"},{image:I(()=>[M(ct,{class:"icon",name:"emptyHistory"}),l("div",It,k(p.$t("noRecord")),1)]),_:1})):(z(!0),K(it,{key:1},yt(m($).approvalList,h=>(z(),K("div",Lt,[M(d,{class:"checkbox",name:h.tokenAddress+"-"+h.approvedContractAddress},{default:I(()=>[l("div",Yt,[l("div",Ht,[l("div",Nt,k(m(C)("approveToken")),1),l("div",Vt,[M(D,{class:"chain-icon",round:"",src:m(At)("bsc",h.tokenAddress.toLowerCase())},null,8,["src"]),l("div",null,k(`${h.tokenSymbol}(${m(lt)(h.tokenAddress)})`),1)])]),l("div",Wt,[l("div",jt,k(m(C)("approveContract")),1),l("div",Ut,[M(D,{class:"chain-icon",round:"",src:m(Dt)(h.approvedContractAddress.toLowerCase(),18)},null,8,["src"]),l("div",null,k(`(${m(lt)(h.approvedContractAddress)})`),1)])]),l("div",Ft,[l("div",Bt,k(m(C)("approveQuantity")),1),l("div",Rt,k(h.approvedAmount),1)]),l("div",Gt,[l("div",zt,k(m(C)("approveTime")),1),l("div",Jt,k(m(St).unix(h.approvedTime).format("YYYY-MM-DD HH:mm:ss")),1)]),l("div",Zt,[Et,l("div",qt,[M(S,{class:"btn",plain:"",type:"primary",onClick:[n=>T(h.tokenAddress+"-"+h.approvedContractAddress),u[1]||(u[1]=kt(()=>{},["stop"]))]},{default:I(()=>[st(k(m(C)("cancelApprove")),1)]),_:2},1032,["onClick"])])])])]),_:2},1032,["name"])]))),256))]),_:1},8,["modelValue"]),l("div",Pt,[l("div",null,[M(d,{class:"checkbox",modelValue:L.value,"onUpdate:modelValue":u[3]||(u[3]=h=>L.value=h),onClick:A},{default:I(()=>[st(k(m(C)("checkAll")),1)]),_:1},8,["modelValue"]),M(S,{class:"btn",type:"primary",disabled:j.value.length==0,onClick:u[4]||(u[4]=h=>T(j.value))},{default:I(()=>[st(k(m(C)("batchCancel")),1)]),_:1},8,["disabled"])])])])):(z(),K("div",Qt,[M(D,{class:"comming-soon-icon",src:"/assets/images/comming-soon.png"}),l("div",Kt,k(m(C)("comingSoon")),1)]))])]),M(R,{class:"approve-success-dialog",show:x.value,"onUpdate:show":u[5]||(u[5]=h=>x.value=h),onClose:u[6]||(u[6]=h=>x.value=!1),"close-on-click-overlay":""},{footer:I(()=>[l("div",se,[M(S,{class:"copy-btn",type:"primary",onClick:O},{default:I(()=>[st(k(m(C)("viewBlockChain")),1)]),_:1})])]),default:I(()=>[l("div",Xt,[l("div",te,[M(ct,{name:"createSuccess"})]),l("div",ee,k(m(C)("cancelApproveWait")),1)])]),_:1},8,["show"])],64)}}},ae=ht(ne,[["__scopeId","data-v-4d54a4d6"]]);export{ae as default};
