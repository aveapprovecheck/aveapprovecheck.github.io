import{J as ft,_ as pt,b as vt,q as _t,d as mt,r as K,K as gt,v as $t,x as yt,f as j,o as B,g as G,h as u,c as k,w as x,j as p,t as g,F as rt,G as ct,B as at,L as lt,y as wt,k as Ct,C as X,l as kt,M as Mt,N as At,D as Dt,E as St}from"./index-68562183.js";import{s as it,A as bt,_ as ut,a as Tt,f as dt,b as xt}from"./ApproveTypeTab-b5794650.js";var ht={exports:{}};(function(U,m){(function(F,_){U.exports=_()})(ft,function(){var F=1e3,_=6e4,V=36e5,I="millisecond",O="second",D="minute",b="hour",T="day",R="week",M="month",tt="quarter",S="year",N="date",Z="Invalid Date",z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,st={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var t=["th","st","nd","rd"],e=n%100;return"["+n+(t[(e-20)%10]||t[e]||t[0])+"]"}},E=function(n,t,e){var o=String(n);return!o||o.length>=t?n:""+Array(t+1-o.length).join(e)+n},nt={s:E,z:function(n){var t=-n.utcOffset(),e=Math.abs(t),o=Math.floor(e/60),s=e%60;return(t<=0?"+":"-")+E(o,2,"0")+":"+E(s,2,"0")},m:function n(t,e){if(t.date()<e.date())return-n(e,t);var o=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(o,M),i=e-s<0,a=t.clone().add(o+(i?-1:1),M);return+(-(o+(e-s)/(i?s-a:a-s))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M,y:S,w:R,d:T,D:N,h:b,m:D,s:O,ms:I,Q:tt}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},h="en",r={};r[h]=st;var w=function(n){return n instanceof A},$=function n(t,e,o){var s;if(!t)return h;if(typeof t=="string"){var i=t.toLowerCase();r[i]&&(s=i),e&&(r[i]=e,s=i);var a=t.split("-");if(!s&&a.length>1)return n(a[0])}else{var d=t.name;r[d]=t,s=d}return!o&&s&&(h=s),s||!o&&h},l=function(n,t){if(w(n))return n.clone();var e=typeof t=="object"?t:{};return e.date=n,e.args=arguments,new A(e)},c=nt;c.l=$,c.i=w,c.w=function(n,t){return l(n,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function n(e){this.$L=$(e.locale,null,!0),this.parse(e)}var t=n.prototype;return t.parse=function(e){this.$d=function(o){var s=o.date,i=o.utc;if(s===null)return new Date(NaN);if(c.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var a=s.match(z);if(a){var d=a[2]-1||0,v=(a[7]||"0").substring(0,3);return i?new Date(Date.UTC(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,v)):new Date(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,v)}}return new Date(s)}(e),this.$x=e.x||{},this.init()},t.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},t.$utils=function(){return c},t.isValid=function(){return this.$d.toString()!==Z},t.isSame=function(e,o){var s=l(e);return this.startOf(o)<=s&&s<=this.endOf(o)},t.isAfter=function(e,o){return l(e)<this.startOf(o)},t.isBefore=function(e,o){return this.endOf(o)<l(e)},t.$g=function(e,o,s){return c.u(e)?this[o]:this.set(s,e)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(e,o){var s=this,i=!!c.u(o)||o,a=c.p(e),d=function(J,C){var H=c.w(s.$u?Date.UTC(s.$y,C,J):new Date(s.$y,C,J),s);return i?H:H.endOf(T)},v=function(J,C){return c.w(s.toDate()[J].apply(s.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(C)),s)},f=this.$W,y=this.$M,Y=this.$D,L="set"+(this.$u?"UTC":"");switch(a){case S:return i?d(1,0):d(31,11);case M:return i?d(1,y):d(0,y+1);case R:var P=this.$locale().weekStart||0,Q=(f<P?f+7:f)-P;return d(i?Y-Q:Y+(6-Q),y);case T:case N:return v(L+"Hours",0);case b:return v(L+"Minutes",1);case D:return v(L+"Seconds",2);case O:return v(L+"Milliseconds",3);default:return this.clone()}},t.endOf=function(e){return this.startOf(e,!1)},t.$set=function(e,o){var s,i=c.p(e),a="set"+(this.$u?"UTC":""),d=(s={},s[T]=a+"Date",s[N]=a+"Date",s[M]=a+"Month",s[S]=a+"FullYear",s[b]=a+"Hours",s[D]=a+"Minutes",s[O]=a+"Seconds",s[I]=a+"Milliseconds",s)[i],v=i===T?this.$D+(o-this.$W):o;if(i===M||i===S){var f=this.clone().set(N,1);f.$d[d](v),f.init(),this.$d=f.set(N,Math.min(this.$D,f.daysInMonth())).$d}else d&&this.$d[d](v);return this.init(),this},t.set=function(e,o){return this.clone().$set(e,o)},t.get=function(e){return this[c.p(e)]()},t.add=function(e,o){var s,i=this;e=Number(e);var a=c.p(o),d=function(y){var Y=l(i);return c.w(Y.date(Y.date()+Math.round(y*e)),i)};if(a===M)return this.set(M,this.$M+e);if(a===S)return this.set(S,this.$y+e);if(a===T)return d(1);if(a===R)return d(7);var v=(s={},s[D]=_,s[b]=V,s[O]=F,s)[a]||1,f=this.$d.getTime()+e*v;return c.w(f,this)},t.subtract=function(e,o){return this.add(-1*e,o)},t.format=function(e){var o=this,s=this.$locale();if(!this.isValid())return s.invalidDate||Z;var i=e||"YYYY-MM-DDTHH:mm:ssZ",a=c.z(this),d=this.$H,v=this.$m,f=this.$M,y=s.weekdays,Y=s.months,L=function(C,H,ot,et){return C&&(C[H]||C(o,i))||ot[H].slice(0,et)},P=function(C){return c.s(d%12||12,C,"0")},Q=s.meridiem||function(C,H,ot){var et=C<12?"AM":"PM";return ot?et.toLowerCase():et},J={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:c.s(f+1,2,"0"),MMM:L(s.monthsShort,f,Y,3),MMMM:L(Y,f),D:this.$D,DD:c.s(this.$D,2,"0"),d:String(this.$W),dd:L(s.weekdaysMin,this.$W,y,2),ddd:L(s.weekdaysShort,this.$W,y,3),dddd:y[this.$W],H:String(d),HH:c.s(d,2,"0"),h:P(1),hh:P(2),a:Q(d,v,!0),A:Q(d,v,!1),m:String(v),mm:c.s(v,2,"0"),s:String(this.$s),ss:c.s(this.$s,2,"0"),SSS:c.s(this.$ms,3,"0"),Z:a};return i.replace(q,function(C,H){return H||J[C]||a.replace(":","")})},t.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},t.diff=function(e,o,s){var i,a=c.p(o),d=l(e),v=(d.utcOffset()-this.utcOffset())*_,f=this-d,y=c.m(this,d);return y=(i={},i[S]=y/12,i[M]=y,i[tt]=y/3,i[R]=(f-v)/6048e5,i[T]=(f-v)/864e5,i[b]=f/V,i[D]=f/_,i[O]=f/F,i)[a]||f,s?y:c.a(y)},t.daysInMonth=function(){return this.endOf(M).$D},t.$locale=function(){return r[this.$L]},t.locale=function(e,o){if(!e)return this.$L;var s=this.clone(),i=$(e,o,!0);return i&&(s.$L=i),s},t.clone=function(){return c.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},n}(),W=A.prototype;return l.prototype=W,[["$ms",I],["$s",O],["$m",D],["$H",b],["$W",T],["$M",M],["$y",S],["$D",N]].forEach(function(n){W[n[1]]=function(t){return this.$g(t,n[0],n[1])}}),l.extend=function(n,t){return n.$i||(n(t,A,l),n.$i=!0),l},l.locale=$,l.isDayjs=w,l.unix=function(n){return l(1e3*n)},l.en=r[h],l.Ls=r,l.p={},l})})(ht);const It=ht.exports;const Ot=U=>(Dt("data-v-17760f48"),U=U(),St(),U),Lt={class:"check-result"},Nt={class:"result-list"},Yt={key:0,class:"token-list"},Ht={class:"text"},Vt={class:"item"},Wt={class:"right-content"},jt={class:"content-item"},Bt={class:"left"},Ut={class:"right"},Ft={class:"content-item"},Rt={class:"left"},Et={class:"right"},Jt=["onClick"],Gt={key:0,class:"content-item"},Zt={class:"left"},zt={class:"right"},qt={class:"content-item"},Pt={class:"left"},Qt={class:"right"},Kt={class:"content-item"},Xt={class:"left"},te={class:"right"},ee={class:"operate"},se=Ot(()=>u("div",{class:"approve-count"},null,-1)),ne={class:"cancel-approve"},oe={class:"check-all"},ae={key:1,class:"NFT-list"},ie={class:"comming-soon-text"},re={class:"content"},ce={class:"transfer-icon"},le={class:"title"},ue={class:"btn"},de={__name:"CheckResult",setup(U){const{t:m}=vt(),F=_t("global"),_=mt(),V=K([]),I=K(!1),O=K(null),D=K([]),b=K(!1);function T(){console.log("jumpToChainBrowser");let h=F.cfg.allowChainList.find(r=>r.chainId==_.chainId);for(let r of D.value)console.log(r),h?window.open(h.txNetwork+r,r):at(m("unsupportedNetwork"))}function R(){}function M(){O.value.toggleAll(I.value)}function tt(h){h.length==_.approvalList.length?I.value=!0:I.value=!1}async function S(h){console.log(z),console.log(h);let r=await ct.wallet.getAccount();if(z.toLowerCase()!=r.toLowerCase()){at(m("switchWalletAddress"));return}if(_.getChainId(),_.chainId==-1)return;console.log(h instanceof Array);let w=[];if(h instanceof Array)for(let $ of h){let l=$.split("-")[0],c=$.split("-")[1],A=_.approvalList.find(W=>W.tokenAddress==l&&W.approvedContractAddress==c);w.push(A)}else{let $=h.split("-")[0],l=h.split("-")[1],c=_.approvalList.find(A=>A.tokenAddress==$&&A.approvedContractAddress==l);w.push(c)}N(w)}async function N(h){console.log(h),D.value=[];let r=lt({forbidClick:!0,duration:0}),w=[];for(let $ of h)try{let l=await ct.wallet.approveMinAmount($.tokenAddress,$.approvedContractAddress);D.value.push(l.hash),w.push(l.wait())}catch(l){window.ethereum&&l.code==="ACTION_REJECTED"?it(m("userCancelOperate")):l.message&&l.message=="Canceled"&&it(m("userCancelOperate"));continue}r.close(),D.value.length!=0&&(b.value=!0,Promise.all(w).then($=>{console.log($);let l=0;for(let c of $)c.status==1&&(l++,it({type:"success",message:m("upChainSuccessfully")}));l>0&&E()}))}const Z=gt(),z=Z.params.walletAddress,q=Z.params.chainId,st=$t(()=>At.allowChainList.find(r=>r.chainId==q).chain);async function E(){const h=lt({forbidClick:!1,duration:0});try{await _.getApprovelList(q,z)}catch(r){at(r),console.log(r)}finally{h.close()}}function nt(h){let r=F.cfg.allowChainList.find(w=>w.chainId==q);r?window.open(r.addressNetwork+h,"_blank"):Toast(m("unsupportedNetwork"))}return yt(()=>{_.hasCheckData||E()}),(h,r)=>{const w=j("van-nav-bar"),$=j("van-empty"),l=j("van-image"),c=j("van-button"),A=j("van-checkbox"),W=j("van-checkbox-group"),n=j("van-dialog");return B(),G(rt,null,[u("div",Lt,[k(w,{class:"nav-bar"},{title:x(()=>[k(bt,{type:p(_).approveType,"onUpdate:type":r[0]||(r[0]=t=>p(_).approveType=t),onSelectType:R},null,8,["type"])]),_:1}),u("div",Nt,[p(_).approveType==0?(B(),G("div",Yt,[k(W,{modelValue:V.value,"onUpdate:modelValue":r[2]||(r[2]=t=>V.value=t),ref_key:"checkboxGroup",ref:O,onChange:tt},{default:x(()=>[p(_).approvalList.length==0?(B(),wt($,{key:0,class:"empty-box"},{image:x(()=>[k(ut,{class:"icon",name:"emptyHistory"}),u("div",Ht,g(h.$t("noRecord")),1)]),_:1})):(B(!0),G(rt,{key:1},Ct(p(_).approvalList,t=>(B(),G("div",Vt,[k(A,{class:"checkbox",name:t.tokenAddress+"-"+t.approvedContractAddress},{default:x(()=>[u("div",Wt,[u("div",jt,[u("div",Bt,g(p(m)("approveToken")),1),u("div",Ut,[k(l,{class:"chain-icon",round:"",src:p(Tt)(p(st),t.tokenAddress.toLowerCase())},null,8,["src"]),u("div",null,g(`${t.tokenSymbol}(${p(dt)(t.tokenAddress)})`),1)])]),u("div",Ft,[u("div",Rt,g(p(m)("approveContract")),1),u("div",Et,[k(l,{class:"chain-icon",round:"",src:p(xt)(t.approvedContractAddress.toLowerCase(),18)},null,8,["src"]),X(" "+g(t.tag)+" ",1),u("div",{class:"address",onClick:e=>nt(t.approvedContractAddress)},g(`(${p(dt)(t.approvedContractAddress)})`),9,Jt)])]),t.approvedContractName?(B(),G("div",Gt,[u("div",Zt,g(p(m)("contractName")),1),u("div",zt,g(t.approvedContractName),1)])):kt("",!0),u("div",qt,[u("div",Pt,g(p(m)("approveQuantity")),1),u("div",Qt,g(t.approvedAmount),1)]),u("div",Kt,[u("div",Xt,g(p(m)("approveTime")),1),u("div",te,g(p(It).unix(t.approvedTime).format("YYYY-MM-DD HH:mm:ss")),1)]),u("div",ee,[se,u("div",ne,[k(c,{class:"btn",plain:"",type:"primary",onClick:[e=>S(t.tokenAddress+"-"+t.approvedContractAddress),r[1]||(r[1]=Mt(()=>{},["stop"]))]},{default:x(()=>[X(g(p(m)("cancelApprove")),1)]),_:2},1032,["onClick"])])])])]),_:2},1032,["name"])]))),256))]),_:1},8,["modelValue"]),u("div",oe,[u("div",null,[k(A,{class:"checkbox",modelValue:I.value,"onUpdate:modelValue":r[3]||(r[3]=t=>I.value=t),onClick:M},{default:x(()=>[X(g(p(m)("checkAll")),1)]),_:1},8,["modelValue"]),k(c,{class:"btn",type:"primary",disabled:V.value.length==0,onClick:r[4]||(r[4]=t=>S(V.value))},{default:x(()=>[X(g(p(m)("batchCancel")),1)]),_:1},8,["disabled"])])])])):(B(),G("div",ae,[k(l,{class:"comming-soon-icon",src:"/assets/images/comming-soon.png"}),u("div",ie,g(p(m)("comingSoon")),1)]))])]),k(n,{class:"approve-success-dialog",show:b.value,"onUpdate:show":r[5]||(r[5]=t=>b.value=t),"close-on-click-overlay":""},{footer:x(()=>[u("div",ue,[k(c,{class:"copy-btn",type:"primary",onClick:T},{default:x(()=>[X(g(p(m)("viewBlockChain")),1)]),_:1})])]),default:x(()=>[u("div",re,[u("div",ce,[k(ut,{name:"createSuccess"})]),u("div",le,g(p(m)("cancelApproveWait")),1)])]),_:1},8,["show"])],64)}}},pe=pt(de,[["__scopeId","data-v-17760f48"]]);export{pe as default};
