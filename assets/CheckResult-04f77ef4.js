import{G as ft,_ as pt,b as vt,q as _t,d as mt,r as Q,H as gt,x as $t,f as j,o as B,g as E,h as l,c as M,w as x,j as v,t as y,F as it,I as rt,z as ct,J as lt,y as yt,k as wt,A as K,l as Ct,K as kt,B as Mt,C as bt}from"./index-6a32e1a6.js";import{s as at,A as At,_ as ut,a as St,f as dt,b as Dt}from"./ApproveTypeTab-5fea7cf3.js";var ht={exports:{}};(function(U,$){(function(F,m){U.exports=m()})(ft,function(){var F=1e3,m=6e4,W=36e5,I="millisecond",O="second",A="minute",D="hour",T="day",R="week",b="month",X="quarter",S="year",Y="date",G="Invalid Date",z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,tt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,et={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var s=["th","st","nd","rd"],t=e%100;return"["+e+(s[(t-20)%10]||s[t]||s[0])+"]"}},Z=function(e,s,t){var o=String(e);return!o||o.length>=s?e:""+Array(s+1-o.length).join(t)+e},p={s:Z,z:function(e){var s=-e.utcOffset(),t=Math.abs(s),o=Math.floor(t/60),n=t%60;return(s<=0?"+":"-")+Z(o,2,"0")+":"+Z(n,2,"0")},m:function e(s,t){if(s.date()<t.date())return-e(t,s);var o=12*(t.year()-s.year())+(t.month()-s.month()),n=s.clone().add(o,b),i=t-n<0,a=s.clone().add(o+(i?-1:1),b);return+(-(o+(t-n)/(i?n-a:a-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:b,y:S,w:R,d:T,D:Y,h:D,m:A,s:O,ms:I,Q:X}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},c="en",g={};g[c]=et;var w=function(e){return e instanceof L},h=function e(s,t,o){var n;if(!s)return c;if(typeof s=="string"){var i=s.toLowerCase();g[i]&&(n=i),t&&(g[i]=t,n=i);var a=s.split("-");if(!n&&a.length>1)return e(a[0])}else{var d=s.name;g[d]=s,n=d}return!o&&n&&(c=n),n||!o&&c},u=function(e,s){if(w(e))return e.clone();var t=typeof s=="object"?s:{};return t.date=e,t.args=arguments,new L(t)},r=p;r.l=h,r.i=w,r.w=function(e,s){return u(e,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var L=function(){function e(t){this.$L=h(t.locale,null,!0),this.parse(t)}var s=e.prototype;return s.parse=function(t){this.$d=function(o){var n=o.date,i=o.utc;if(n===null)return new Date(NaN);if(r.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var a=n.match(z);if(a){var d=a[2]-1||0,_=(a[7]||"0").substring(0,3);return i?new Date(Date.UTC(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,_)):new Date(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,_)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return r},s.isValid=function(){return this.$d.toString()!==G},s.isSame=function(t,o){var n=u(t);return this.startOf(o)<=n&&n<=this.endOf(o)},s.isAfter=function(t,o){return u(t)<this.startOf(o)},s.isBefore=function(t,o){return this.endOf(o)<u(t)},s.$g=function(t,o,n){return r.u(t)?this[o]:this.set(n,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,o){var n=this,i=!!r.u(o)||o,a=r.p(t),d=function(J,k){var V=r.w(n.$u?Date.UTC(n.$y,k,J):new Date(n.$y,k,J),n);return i?V:V.endOf(T)},_=function(J,k){return r.w(n.toDate()[J].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(k)),n)},f=this.$W,C=this.$M,H=this.$D,N="set"+(this.$u?"UTC":"");switch(a){case S:return i?d(1,0):d(31,11);case b:return i?d(1,C):d(0,C+1);case R:var q=this.$locale().weekStart||0,P=(f<q?f+7:f)-q;return d(i?H-P:H+(6-P),C);case T:case Y:return _(N+"Hours",0);case D:return _(N+"Minutes",1);case A:return _(N+"Seconds",2);case O:return _(N+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,o){var n,i=r.p(t),a="set"+(this.$u?"UTC":""),d=(n={},n[T]=a+"Date",n[Y]=a+"Date",n[b]=a+"Month",n[S]=a+"FullYear",n[D]=a+"Hours",n[A]=a+"Minutes",n[O]=a+"Seconds",n[I]=a+"Milliseconds",n)[i],_=i===T?this.$D+(o-this.$W):o;if(i===b||i===S){var f=this.clone().set(Y,1);f.$d[d](_),f.init(),this.$d=f.set(Y,Math.min(this.$D,f.daysInMonth())).$d}else d&&this.$d[d](_);return this.init(),this},s.set=function(t,o){return this.clone().$set(t,o)},s.get=function(t){return this[r.p(t)]()},s.add=function(t,o){var n,i=this;t=Number(t);var a=r.p(o),d=function(C){var H=u(i);return r.w(H.date(H.date()+Math.round(C*t)),i)};if(a===b)return this.set(b,this.$M+t);if(a===S)return this.set(S,this.$y+t);if(a===T)return d(1);if(a===R)return d(7);var _=(n={},n[A]=m,n[D]=W,n[O]=F,n)[a]||1,f=this.$d.getTime()+t*_;return r.w(f,this)},s.subtract=function(t,o){return this.add(-1*t,o)},s.format=function(t){var o=this,n=this.$locale();if(!this.isValid())return n.invalidDate||G;var i=t||"YYYY-MM-DDTHH:mm:ssZ",a=r.z(this),d=this.$H,_=this.$m,f=this.$M,C=n.weekdays,H=n.months,N=function(k,V,ot,nt){return k&&(k[V]||k(o,i))||ot[V].slice(0,nt)},q=function(k){return r.s(d%12||12,k,"0")},P=n.meridiem||function(k,V,ot){var nt=k<12?"AM":"PM";return ot?nt.toLowerCase():nt},J={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:r.s(f+1,2,"0"),MMM:N(n.monthsShort,f,H,3),MMMM:N(H,f),D:this.$D,DD:r.s(this.$D,2,"0"),d:String(this.$W),dd:N(n.weekdaysMin,this.$W,C,2),ddd:N(n.weekdaysShort,this.$W,C,3),dddd:C[this.$W],H:String(d),HH:r.s(d,2,"0"),h:q(1),hh:q(2),a:P(d,_,!0),A:P(d,_,!1),m:String(_),mm:r.s(_,2,"0"),s:String(this.$s),ss:r.s(this.$s,2,"0"),SSS:r.s(this.$ms,3,"0"),Z:a};return i.replace(tt,function(k,V){return V||J[k]||a.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,o,n){var i,a=r.p(o),d=u(t),_=(d.utcOffset()-this.utcOffset())*m,f=this-d,C=r.m(this,d);return C=(i={},i[S]=C/12,i[b]=C,i[X]=C/3,i[R]=(f-_)/6048e5,i[T]=(f-_)/864e5,i[D]=f/W,i[A]=f/m,i[O]=f/F,i)[a]||f,n?C:r.a(C)},s.daysInMonth=function(){return this.endOf(b).$D},s.$locale=function(){return g[this.$L]},s.locale=function(t,o){if(!t)return this.$L;var n=this.clone(),i=h(t,o,!0);return i&&(n.$L=i),n},s.clone=function(){return r.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},e}(),st=L.prototype;return u.prototype=st,[["$ms",I],["$s",O],["$m",A],["$H",D],["$W",T],["$M",b],["$y",S],["$D",Y]].forEach(function(e){st[e[1]]=function(s){return this.$g(s,e[0],e[1])}}),u.extend=function(e,s){return e.$i||(e(s,L,u),e.$i=!0),u},u.locale=h,u.isDayjs=w,u.unix=function(e){return u(1e3*e)},u.en=g[c],u.Ls=g,u.p={},u})})(ht);const Tt=ht.exports;const xt=U=>(Mt("data-v-ab6a7bf8"),U=U(),bt(),U),It={class:"check-result"},Ot={class:"result-list"},Lt={key:0,class:"token-list"},Nt={class:"text"},Yt={class:"item"},Ht={class:"right-content"},Vt={class:"content-item"},Wt={class:"left"},jt={class:"right"},Bt={class:"content-item"},Ut={class:"left"},Ft={class:"right"},Rt=["onClick"],Jt={key:0,class:"content-item"},Et={class:"left"},Gt={class:"right"},zt={class:"content-item"},Zt={class:"left"},qt={class:"right"},Pt={class:"content-item"},Qt={class:"left"},Kt={class:"right"},Xt={class:"operate"},te=xt(()=>l("div",{class:"approve-count"},null,-1)),ee={class:"cancel-approve"},se={class:"check-all"},ne={key:1,class:"NFT-list"},oe={class:"comming-soon-text"},ae={class:"content"},ie={class:"transfer-icon"},re={class:"title"},ce={class:"btn"},le={__name:"CheckResult",setup(U){const{t:$}=vt(),F=_t("global"),m=mt(),W=Q([]),I=Q(!1),O=Q(null),A=Q([]),D=Q(!1);function T(){console.log("jumpToChainBrowser");let p=F.cfg.allowChainList.find(c=>c.chainId==m.chainId);for(let c of A.value)console.log(c),p?window.open(p.txNetwork+c,c):ct($("unsupportedNetwork"))}function R(){}function b(){O.value.toggleAll(I.value)}function X(p){p.length==m.approvalList.length?I.value=!0:I.value=!1}async function S(p){console.log(z);let c=await rt.wallet.getAccount();if(z.toLowerCase()!=c.toLowerCase()){ct($("switchWalletAddress"));return}if(m.getChainId(),m.chainId==-1)return;console.log(p instanceof Array);let g=[];if(p instanceof Array)for(let w of p){let h=w.split("-")[0],u=w.split("-")[1],r=m.approvalList.find(L=>L.tokenAddress==h&&L.approvedContractAddress==u);g.push(r)}else{let w=p.split("-")[0],h=p.split("-")[1],u=m.approvalList.find(r=>r.tokenAddress==w&&r.approvedContractAddress==h);g.push(u)}console.log(g),Y(g)}async function Y(p){console.log(p),A.value=[];let c=lt({forbidClick:!0,duration:0}),g=[];for(let w of p)try{let h=await rt.wallet.approveMinAmount(w.tokenAddress,w.approvedContractAddress);A.value.push(h.hash),g.push(h.wait())}catch(h){window.ethereum&&h.code==="ACTION_REJECTED"?at($("userCancelOperate")):h.message&&h.message=="Canceled"&&at($("userCancelOperate"));continue}c.close(),A.value.length!=0&&(D.value=!0,Promise.all(g).then(w=>{console.log(w);let h=0;for(let u of w)u.status==1&&(h++,at({type:"success",message:$("upChainSuccessfully")}));h>0&&et()}))}const G=gt(),z=G.params.walletAddress,tt=G.params.chainId;async function et(){const p=lt({forbidClick:!0,duration:0});await m.getApprovalList(tt,z),p.close()}function Z(p){let c=F.cfg.allowChainList.find(g=>g.chainId==tt);c?window.open(c.addressNetwork+p,"_blank"):Toast($("unsupportedNetwork"))}return $t(()=>{m.hasCheckData||et()}),(p,c)=>{const g=j("van-nav-bar"),w=j("van-empty"),h=j("van-image"),u=j("van-button"),r=j("van-checkbox"),L=j("van-checkbox-group"),st=j("van-dialog");return B(),E(it,null,[l("div",It,[M(g,{class:"nav-bar"},{title:x(()=>[M(At,{type:v(m).approveType,"onUpdate:type":c[0]||(c[0]=e=>v(m).approveType=e),onSelectType:R},null,8,["type"])]),_:1}),l("div",Ot,[v(m).approveType==0?(B(),E("div",Lt,[M(L,{modelValue:W.value,"onUpdate:modelValue":c[2]||(c[2]=e=>W.value=e),ref_key:"checkboxGroup",ref:O,onChange:X},{default:x(()=>[v(m).approvalList.length==0?(B(),yt(w,{key:0,class:"empty-box"},{image:x(()=>[M(ut,{class:"icon",name:"emptyHistory"}),l("div",Nt,y(p.$t("noRecord")),1)]),_:1})):(B(!0),E(it,{key:1},wt(v(m).approvalList,e=>(B(),E("div",Yt,[M(r,{class:"checkbox",name:e.tokenAddress+"-"+e.approvedContractAddress},{default:x(()=>[l("div",Ht,[l("div",Vt,[l("div",Wt,y(v($)("approveToken")),1),l("div",jt,[M(h,{class:"chain-icon",round:"",src:v(St)("bsc",e.tokenAddress.toLowerCase())},null,8,["src"]),l("div",null,y(`${e.tokenSymbol}(${v(dt)(e.tokenAddress)})`),1)])]),l("div",Bt,[l("div",Ut,y(v($)("approveContract")),1),l("div",Ft,[M(h,{class:"chain-icon",round:"",src:v(Dt)(e.approvedContractAddress.toLowerCase(),18)},null,8,["src"]),K(" "+y(e.tag)+" ",1),l("div",{class:"address",onClick:s=>Z(e.approvedContractAddress)},y(`(${v(dt)(e.approvedContractAddress)})`),9,Rt)])]),e.approvedContractName?(B(),E("div",Jt,[l("div",Et,y(v($)("contractName")),1),l("div",Gt,y(e.approvedContractName),1)])):Ct("",!0),l("div",zt,[l("div",Zt,y(v($)("approveQuantity")),1),l("div",qt,y(e.approvedAmount),1)]),l("div",Pt,[l("div",Qt,y(v($)("approveTime")),1),l("div",Kt,y(v(Tt).unix(e.approvedTime).format("YYYY-MM-DD HH:mm:ss")),1)]),l("div",Xt,[te,l("div",ee,[M(u,{class:"btn",plain:"",type:"primary",onClick:[s=>S(e.tokenAddress+"-"+e.approvedContractAddress),c[1]||(c[1]=kt(()=>{},["stop"]))]},{default:x(()=>[K(y(v($)("cancelApprove")),1)]),_:2},1032,["onClick"])])])])]),_:2},1032,["name"])]))),256))]),_:1},8,["modelValue"]),l("div",se,[l("div",null,[M(r,{class:"checkbox",modelValue:I.value,"onUpdate:modelValue":c[3]||(c[3]=e=>I.value=e),onClick:b},{default:x(()=>[K(y(v($)("checkAll")),1)]),_:1},8,["modelValue"]),M(u,{class:"btn",type:"primary",disabled:W.value.length==0,onClick:c[4]||(c[4]=e=>S(W.value))},{default:x(()=>[K(y(v($)("batchCancel")),1)]),_:1},8,["disabled"])])])])):(B(),E("div",ne,[M(h,{class:"comming-soon-icon",src:"/assets/images/comming-soon.png"}),l("div",oe,y(v($)("comingSoon")),1)]))])]),M(st,{class:"approve-success-dialog",show:D.value,"onUpdate:show":c[5]||(c[5]=e=>D.value=e),"close-on-click-overlay":""},{footer:x(()=>[l("div",ce,[M(u,{class:"copy-btn",type:"primary",onClick:T},{default:x(()=>[K(y(v($)("viewBlockChain")),1)]),_:1})])]),default:x(()=>[l("div",ae,[l("div",ie,[M(ut,{name:"createSuccess"})]),l("div",re,y(v($)("cancelApproveWait")),1)])]),_:1},8,["show"])],64)}}},he=pt(le,[["__scopeId","data-v-ab6a7bf8"]]);export{he as default};
