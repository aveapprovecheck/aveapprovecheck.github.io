import{i as vt,e as _t,C as mt,m as gt,u as $t,c as M,a as yt,D as wt,E as Ct,_ as kt,g as Mt,f as bt,b as At,r as K,G as St,o as Dt,j as U,k as B,l as J,n as l,w as O,p as v,t as w,F as rt,H as ct,x as lt,I as ut,q as Tt,J as xt,y as X,v as Ot,K as It,z as Nt,A as Lt}from"./index-795476c0.js";import{A as Yt,_ as dt,a as Ht,f as ht,b as Vt}from"./ApproveTypeTab-43636084.js";let ft,G;const jt=y=>mt(y)?y:{message:y};function Wt(){({instance:G}=gt({setup(){const{state:y,toggle:_}=$t();return()=>M(wt,yt(y,{"onUpdate:show":_}),null)}}))}const Ut=()=>({type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,position:void 0,className:"",lockScroll:!1,background:void 0});let Bt=Ut();const Ft=()=>{G&&G.toggle(!1)};function it(y){if(vt)return G||Wt(),y=_t({},Bt,jt(y)),G.open(y),clearTimeout(ft),y.duration>0&&(ft=setTimeout(Ft,y.duration)),G}var pt={exports:{}};(function(y,_){(function(F,g){y.exports=g()})(Ct,function(){var F=1e3,g=6e4,W=36e5,I="millisecond",N="second",S="minute",T="hour",x="day",R="week",A="month",tt="quarter",D="year",H="date",z="Invalid Date",P=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,et=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,st={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var s=["th","st","nd","rd"],t=e%100;return"["+e+(s[(t-20)%10]||s[t]||s[0])+"]"}},Z=function(e,s,t){var o=String(e);return!o||o.length>=s?e:""+Array(s+1-o.length).join(t)+e},p={s:Z,z:function(e){var s=-e.utcOffset(),t=Math.abs(s),o=Math.floor(t/60),n=t%60;return(s<=0?"+":"-")+Z(o,2,"0")+":"+Z(n,2,"0")},m:function e(s,t){if(s.date()<t.date())return-e(t,s);var o=12*(t.year()-s.year())+(t.month()-s.month()),n=s.clone().add(o,A),i=t-n<0,a=s.clone().add(o+(i?-1:1),A);return+(-(o+(t-n)/(i?n-a:a-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:A,y:D,w:R,d:x,D:H,h:T,m:S,s:N,ms:I,Q:tt}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},c="en",$={};$[c]=st;var C=function(e){return e instanceof L},h=function e(s,t,o){var n;if(!s)return c;if(typeof s=="string"){var i=s.toLowerCase();$[i]&&(n=i),t&&($[i]=t,n=i);var a=s.split("-");if(!n&&a.length>1)return e(a[0])}else{var d=s.name;$[d]=s,n=d}return!o&&n&&(c=n),n||!o&&c},u=function(e,s){if(C(e))return e.clone();var t=typeof s=="object"?s:{};return t.date=e,t.args=arguments,new L(t)},r=p;r.l=h,r.i=C,r.w=function(e,s){return u(e,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var L=function(){function e(t){this.$L=h(t.locale,null,!0),this.parse(t)}var s=e.prototype;return s.parse=function(t){this.$d=function(o){var n=o.date,i=o.utc;if(n===null)return new Date(NaN);if(r.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var a=n.match(P);if(a){var d=a[2]-1||0,m=(a[7]||"0").substring(0,3);return i?new Date(Date.UTC(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,m)):new Date(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,m)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return r},s.isValid=function(){return this.$d.toString()!==z},s.isSame=function(t,o){var n=u(t);return this.startOf(o)<=n&&n<=this.endOf(o)},s.isAfter=function(t,o){return u(t)<this.startOf(o)},s.isBefore=function(t,o){return this.endOf(o)<u(t)},s.$g=function(t,o,n){return r.u(t)?this[o]:this.set(n,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,o){var n=this,i=!!r.u(o)||o,a=r.p(t),d=function(E,b){var j=r.w(n.$u?Date.UTC(n.$y,b,E):new Date(n.$y,b,E),n);return i?j:j.endOf(x)},m=function(E,b){return r.w(n.toDate()[E].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(b)),n)},f=this.$W,k=this.$M,V=this.$D,Y="set"+(this.$u?"UTC":"");switch(a){case D:return i?d(1,0):d(31,11);case A:return i?d(1,k):d(0,k+1);case R:var q=this.$locale().weekStart||0,Q=(f<q?f+7:f)-q;return d(i?V-Q:V+(6-Q),k);case x:case H:return m(Y+"Hours",0);case T:return m(Y+"Minutes",1);case S:return m(Y+"Seconds",2);case N:return m(Y+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,o){var n,i=r.p(t),a="set"+(this.$u?"UTC":""),d=(n={},n[x]=a+"Date",n[H]=a+"Date",n[A]=a+"Month",n[D]=a+"FullYear",n[T]=a+"Hours",n[S]=a+"Minutes",n[N]=a+"Seconds",n[I]=a+"Milliseconds",n)[i],m=i===x?this.$D+(o-this.$W):o;if(i===A||i===D){var f=this.clone().set(H,1);f.$d[d](m),f.init(),this.$d=f.set(H,Math.min(this.$D,f.daysInMonth())).$d}else d&&this.$d[d](m);return this.init(),this},s.set=function(t,o){return this.clone().$set(t,o)},s.get=function(t){return this[r.p(t)]()},s.add=function(t,o){var n,i=this;t=Number(t);var a=r.p(o),d=function(k){var V=u(i);return r.w(V.date(V.date()+Math.round(k*t)),i)};if(a===A)return this.set(A,this.$M+t);if(a===D)return this.set(D,this.$y+t);if(a===x)return d(1);if(a===R)return d(7);var m=(n={},n[S]=g,n[T]=W,n[N]=F,n)[a]||1,f=this.$d.getTime()+t*m;return r.w(f,this)},s.subtract=function(t,o){return this.add(-1*t,o)},s.format=function(t){var o=this,n=this.$locale();if(!this.isValid())return n.invalidDate||z;var i=t||"YYYY-MM-DDTHH:mm:ssZ",a=r.z(this),d=this.$H,m=this.$m,f=this.$M,k=n.weekdays,V=n.months,Y=function(b,j,at,ot){return b&&(b[j]||b(o,i))||at[j].slice(0,ot)},q=function(b){return r.s(d%12||12,b,"0")},Q=n.meridiem||function(b,j,at){var ot=b<12?"AM":"PM";return at?ot.toLowerCase():ot},E={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:r.s(f+1,2,"0"),MMM:Y(n.monthsShort,f,V,3),MMMM:Y(V,f),D:this.$D,DD:r.s(this.$D,2,"0"),d:String(this.$W),dd:Y(n.weekdaysMin,this.$W,k,2),ddd:Y(n.weekdaysShort,this.$W,k,3),dddd:k[this.$W],H:String(d),HH:r.s(d,2,"0"),h:q(1),hh:q(2),a:Q(d,m,!0),A:Q(d,m,!1),m:String(m),mm:r.s(m,2,"0"),s:String(this.$s),ss:r.s(this.$s,2,"0"),SSS:r.s(this.$ms,3,"0"),Z:a};return i.replace(et,function(b,j){return j||E[b]||a.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,o,n){var i,a=r.p(o),d=u(t),m=(d.utcOffset()-this.utcOffset())*g,f=this-d,k=r.m(this,d);return k=(i={},i[D]=k/12,i[A]=k,i[tt]=k/3,i[R]=(f-m)/6048e5,i[x]=(f-m)/864e5,i[T]=f/W,i[S]=f/g,i[N]=f/F,i)[a]||f,n?k:r.a(k)},s.daysInMonth=function(){return this.endOf(A).$D},s.$locale=function(){return $[this.$L]},s.locale=function(t,o){if(!t)return this.$L;var n=this.clone(),i=h(t,o,!0);return i&&(n.$L=i),n},s.clone=function(){return r.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},e}(),nt=L.prototype;return u.prototype=nt,[["$ms",I],["$s",N],["$m",S],["$H",T],["$W",x],["$M",A],["$y",D],["$D",H]].forEach(function(e){nt[e[1]]=function(s){return this.$g(s,e[0],e[1])}}),u.extend=function(e,s){return e.$i||(e(s,L,u),e.$i=!0),u},u.locale=h,u.isDayjs=C,u.unix=function(e){return u(1e3*e)},u.en=$[c],u.Ls=$,u.p={},u})})(pt);const Rt=pt.exports;const Et=y=>(Nt("data-v-ab6a7bf8"),y=y(),Lt(),y),Jt={class:"check-result"},Gt={class:"result-list"},zt={key:0,class:"token-list"},Pt={class:"text"},Zt={class:"item"},qt={class:"right-content"},Qt={class:"content-item"},Kt={class:"left"},Xt={class:"right"},te={class:"content-item"},ee={class:"left"},se={class:"right"},ne=["onClick"],oe={key:0,class:"content-item"},ae={class:"left"},ie={class:"right"},re={class:"content-item"},ce={class:"left"},le={class:"right"},ue={class:"content-item"},de={class:"left"},he={class:"right"},fe={class:"operate"},pe=Et(()=>l("div",{class:"approve-count"},null,-1)),ve={class:"cancel-approve"},_e={class:"check-all"},me={key:1,class:"NFT-list"},ge={class:"comming-soon-text"},$e={class:"content"},ye={class:"transfer-icon"},we={class:"title"},Ce={class:"btn"},ke={__name:"CheckResult",setup(y){const{t:_}=Mt(),F=bt("global"),g=At(),W=K([]),I=K(!1),N=K(null),S=K([]),T=K(!1);function x(){console.log("jumpToChainBrowser");let p=F.cfg.allowChainList.find(c=>c.chainId==g.chainId);for(let c of S.value)console.log(c),p?window.open(p.txNetwork+c,c):lt(_("unsupportedNetwork"))}function R(){}function A(){N.value.toggleAll(I.value)}function tt(p){p.length==g.approvalList.length?I.value=!0:I.value=!1}async function D(p){console.log(P);let c=await ct.wallet.getAccount();if(P.toLowerCase()!=c.toLowerCase()){lt(_("switchWalletAddress"));return}if(g.getChainId(),g.chainId==-1)return;console.log(p instanceof Array);let $=[];if(p instanceof Array)for(let C of p){let h=C.split("-")[0],u=C.split("-")[1],r=g.approvalList.find(L=>L.tokenAddress==h&&L.approvedContractAddress==u);$.push(r)}else{let C=p.split("-")[0],h=p.split("-")[1],u=g.approvalList.find(r=>r.tokenAddress==C&&r.approvedContractAddress==h);$.push(u)}console.log($),H($)}async function H(p){console.log(p),S.value=[];let c=ut({forbidClick:!0,duration:0}),$=[];for(let C of p)try{let h=await ct.wallet.approveMinAmount(C.tokenAddress,C.approvedContractAddress);S.value.push(h.hash),$.push(h.wait())}catch(h){(window.ethereum&&h.code==="ACTION_REJECTED"||h.message&&h.message=="Canceled")&&it(_("userCancelOperate"));continue}c.close(),S.value.length!=0&&(T.value=!0,Promise.all($).then(C=>{console.log(C);let h=0;for(let u of C)u.status==1&&(h++,it({type:"success",message:_("upChainSuccessfully")}));h>0&&st()}))}const z=St(),P=z.params.walletAddress,et=z.params.chainId;async function st(){const p=ut({forbidClick:!0,duration:0});await g.getApprovalList(et,P),p.close()}function Z(p){let c=F.cfg.allowChainList.find($=>$.chainId==et);c?window.open(c.addressNetwork+p,"_blank"):Toast(_("unsupportedNetwork"))}return Dt(()=>{g.hasCheckData||st()}),(p,c)=>{const $=U("van-nav-bar"),C=U("van-empty"),h=U("van-image"),u=U("van-button"),r=U("van-checkbox"),L=U("van-checkbox-group"),nt=U("van-dialog");return B(),J(rt,null,[l("div",Jt,[M($,{class:"nav-bar"},{title:O(()=>[M(Yt,{type:v(g).approveType,"onUpdate:type":c[0]||(c[0]=e=>v(g).approveType=e),onSelectType:R},null,8,["type"])]),_:1}),l("div",Gt,[v(g).approveType==0?(B(),J("div",zt,[M(L,{modelValue:W.value,"onUpdate:modelValue":c[2]||(c[2]=e=>W.value=e),ref_key:"checkboxGroup",ref:N,onChange:tt},{default:O(()=>[v(g).approvalList.length==0?(B(),Tt(C,{key:0,class:"empty-box"},{image:O(()=>[M(dt,{class:"icon",name:"emptyHistory"}),l("div",Pt,w(p.$t("noRecord")),1)]),_:1})):(B(!0),J(rt,{key:1},xt(v(g).approvalList,e=>(B(),J("div",Zt,[M(r,{class:"checkbox",name:e.tokenAddress+"-"+e.approvedContractAddress},{default:O(()=>[l("div",qt,[l("div",Qt,[l("div",Kt,w(v(_)("approveToken")),1),l("div",Xt,[M(h,{class:"chain-icon",round:"",src:v(Ht)("bsc",e.tokenAddress.toLowerCase())},null,8,["src"]),l("div",null,w(`${e.tokenSymbol}(${v(ht)(e.tokenAddress)})`),1)])]),l("div",te,[l("div",ee,w(v(_)("approveContract")),1),l("div",se,[M(h,{class:"chain-icon",round:"",src:v(Vt)(e.approvedContractAddress.toLowerCase(),18)},null,8,["src"]),X(" "+w(e.tag)+" ",1),l("div",{class:"address",onClick:s=>Z(e.approvedContractAddress)},w(`(${v(ht)(e.approvedContractAddress)})`),9,ne)])]),e.approvedContractName?(B(),J("div",oe,[l("div",ae,w(v(_)("contractName")),1),l("div",ie,w(e.approvedContractName),1)])):Ot("",!0),l("div",re,[l("div",ce,w(v(_)("approveQuantity")),1),l("div",le,w(e.approvedAmount),1)]),l("div",ue,[l("div",de,w(v(_)("approveTime")),1),l("div",he,w(v(Rt).unix(e.approvedTime).format("YYYY-MM-DD HH:mm:ss")),1)]),l("div",fe,[pe,l("div",ve,[M(u,{class:"btn",plain:"",type:"primary",onClick:[s=>D(e.tokenAddress+"-"+e.approvedContractAddress),c[1]||(c[1]=It(()=>{},["stop"]))]},{default:O(()=>[X(w(v(_)("cancelApprove")),1)]),_:2},1032,["onClick"])])])])]),_:2},1032,["name"])]))),256))]),_:1},8,["modelValue"]),l("div",_e,[l("div",null,[M(r,{class:"checkbox",modelValue:I.value,"onUpdate:modelValue":c[3]||(c[3]=e=>I.value=e),onClick:A},{default:O(()=>[X(w(v(_)("checkAll")),1)]),_:1},8,["modelValue"]),M(u,{class:"btn",type:"primary",disabled:W.value.length==0,onClick:c[4]||(c[4]=e=>D(W.value))},{default:O(()=>[X(w(v(_)("batchCancel")),1)]),_:1},8,["disabled"])])])])):(B(),J("div",me,[M(h,{class:"comming-soon-icon",src:"/assets/images/comming-soon.png"}),l("div",ge,w(v(_)("comingSoon")),1)]))])]),M(nt,{class:"approve-success-dialog",show:T.value,"onUpdate:show":c[5]||(c[5]=e=>T.value=e),"close-on-click-overlay":""},{footer:O(()=>[l("div",Ce,[M(u,{class:"copy-btn",type:"primary",onClick:x},{default:O(()=>[X(w(v(_)("viewBlockChain")),1)]),_:1})])]),default:O(()=>[l("div",$e,[l("div",ye,[M(dt,{name:"createSuccess"})]),l("div",we,w(v(_)("cancelApproveWait")),1)])]),_:1},8,["show"])],64)}}},Ae=kt(ke,[["__scopeId","data-v-ab6a7bf8"]]);export{Ae as default};
