import{C as ut,_ as dt,g as ht,f as ft,b as pt,r as P,D as vt,o as _t,j as G,k as Q,l as q,n as u,c as A,w as H,p as m,t as k,F as it,E as at,x as rt,G as mt,H as $t,y as et,I as gt,z as yt,A as wt}from"./index-38018f65.js";import{A as kt,_ as Mt,a as Ct,f as ct,b as bt}from"./ApproveTypeTab-5ff175cb.js";var lt={exports:{}};(function(U,M){(function(R,g){U.exports=g()})(ut,function(){var R=1e3,g=6e4,j=36e5,I="millisecond",Y="second",D="minute",S="hour",O="day",F="week",C="month",K="quarter",x="year",N="date",z="Invalid Date",J=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,st=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,X={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var s=["th","st","nd","rd"],t=n%100;return"["+n+(s[(t-20)%10]||s[t]||s[0])+"]"}},v=function(n,s,t){var o=String(n);return!o||o.length>=s?n:""+Array(s+1-o.length).join(t)+n},l={s:v,z:function(n){var s=-n.utcOffset(),t=Math.abs(s),o=Math.floor(t/60),e=t%60;return(s<=0?"+":"-")+v(o,2,"0")+":"+v(e,2,"0")},m:function n(s,t){if(s.date()<t.date())return-n(t,s);var o=12*(t.year()-s.year())+(t.month()-s.month()),e=s.clone().add(o,C),a=t-e<0,i=s.clone().add(o+(a?-1:1),C);return+(-(o+(t-e)/(a?e-i:i-e))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:C,y:x,w:F,d:O,D:N,h:S,m:D,s:Y,ms:I,Q:K}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},$="en",f={};f[$]=X;var b=function(n){return n instanceof d},T=function n(s,t,o){var e;if(!s)return $;if(typeof s=="string"){var a=s.toLowerCase();f[a]&&(e=a),t&&(f[a]=t,e=a);var i=s.split("-");if(!e&&i.length>1)return n(i[0])}else{var c=s.name;f[c]=s,e=c}return!o&&e&&($=e),e||!o&&$},h=function(n,s){if(b(n))return n.clone();var t=typeof s=="object"?s:{};return t.date=n,t.args=arguments,new d(t)},r=l;r.l=T,r.i=b,r.w=function(n,s){return h(n,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var d=function(){function n(t){this.$L=T(t.locale,null,!0),this.parse(t)}var s=n.prototype;return s.parse=function(t){this.$d=function(o){var e=o.date,a=o.utc;if(e===null)return new Date(NaN);if(r.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var i=e.match(J);if(i){var c=i[2]-1||0,_=(i[7]||"0").substring(0,3);return a?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,_)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,_)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return r},s.isValid=function(){return this.$d.toString()!==z},s.isSame=function(t,o){var e=h(t);return this.startOf(o)<=e&&e<=this.endOf(o)},s.isAfter=function(t,o){return h(t)<this.startOf(o)},s.isBefore=function(t,o){return this.endOf(o)<h(t)},s.$g=function(t,o,e){return r.u(t)?this[o]:this.set(e,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,o){var e=this,a=!!r.u(o)||o,i=r.p(t),c=function(B,w){var W=r.w(e.$u?Date.UTC(e.$y,w,B):new Date(e.$y,w,B),e);return a?W:W.endOf(O)},_=function(B,w){return r.w(e.toDate()[B].apply(e.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(w)),e)},p=this.$W,y=this.$M,V=this.$D,L="set"+(this.$u?"UTC":"");switch(i){case x:return a?c(1,0):c(31,11);case C:return a?c(1,y):c(0,y+1);case F:var Z=this.$locale().weekStart||0,E=(p<Z?p+7:p)-Z;return c(a?V-E:V+(6-E),y);case O:case N:return _(L+"Hours",0);case S:return _(L+"Minutes",1);case D:return _(L+"Seconds",2);case Y:return _(L+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,o){var e,a=r.p(t),i="set"+(this.$u?"UTC":""),c=(e={},e[O]=i+"Date",e[N]=i+"Date",e[C]=i+"Month",e[x]=i+"FullYear",e[S]=i+"Hours",e[D]=i+"Minutes",e[Y]=i+"Seconds",e[I]=i+"Milliseconds",e)[a],_=a===O?this.$D+(o-this.$W):o;if(a===C||a===x){var p=this.clone().set(N,1);p.$d[c](_),p.init(),this.$d=p.set(N,Math.min(this.$D,p.daysInMonth())).$d}else c&&this.$d[c](_);return this.init(),this},s.set=function(t,o){return this.clone().$set(t,o)},s.get=function(t){return this[r.p(t)]()},s.add=function(t,o){var e,a=this;t=Number(t);var i=r.p(o),c=function(y){var V=h(a);return r.w(V.date(V.date()+Math.round(y*t)),a)};if(i===C)return this.set(C,this.$M+t);if(i===x)return this.set(x,this.$y+t);if(i===O)return c(1);if(i===F)return c(7);var _=(e={},e[D]=g,e[S]=j,e[Y]=R,e)[i]||1,p=this.$d.getTime()+t*_;return r.w(p,this)},s.subtract=function(t,o){return this.add(-1*t,o)},s.format=function(t){var o=this,e=this.$locale();if(!this.isValid())return e.invalidDate||z;var a=t||"YYYY-MM-DDTHH:mm:ssZ",i=r.z(this),c=this.$H,_=this.$m,p=this.$M,y=e.weekdays,V=e.months,L=function(w,W,ot,tt){return w&&(w[W]||w(o,a))||ot[W].slice(0,tt)},Z=function(w){return r.s(c%12||12,w,"0")},E=e.meridiem||function(w,W,ot){var tt=w<12?"AM":"PM";return ot?tt.toLowerCase():tt},B={YY:String(this.$y).slice(-2),YYYY:this.$y,M:p+1,MM:r.s(p+1,2,"0"),MMM:L(e.monthsShort,p,V,3),MMMM:L(V,p),D:this.$D,DD:r.s(this.$D,2,"0"),d:String(this.$W),dd:L(e.weekdaysMin,this.$W,y,2),ddd:L(e.weekdaysShort,this.$W,y,3),dddd:y[this.$W],H:String(c),HH:r.s(c,2,"0"),h:Z(1),hh:Z(2),a:E(c,_,!0),A:E(c,_,!1),m:String(_),mm:r.s(_,2,"0"),s:String(this.$s),ss:r.s(this.$s,2,"0"),SSS:r.s(this.$ms,3,"0"),Z:i};return a.replace(st,function(w,W){return W||B[w]||i.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,o,e){var a,i=r.p(o),c=h(t),_=(c.utcOffset()-this.utcOffset())*g,p=this-c,y=r.m(this,c);return y=(a={},a[x]=y/12,a[C]=y,a[K]=y/3,a[F]=(p-_)/6048e5,a[O]=(p-_)/864e5,a[S]=p/j,a[D]=p/g,a[Y]=p/R,a)[i]||p,e?y:r.a(y)},s.daysInMonth=function(){return this.endOf(C).$D},s.$locale=function(){return f[this.$L]},s.locale=function(t,o){if(!t)return this.$L;var e=this.clone(),a=T(t,o,!0);return a&&(e.$L=a),e},s.clone=function(){return r.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},n}(),nt=d.prototype;return h.prototype=nt,[["$ms",I],["$s",Y],["$m",D],["$H",S],["$W",O],["$M",C],["$y",x],["$D",N]].forEach(function(n){nt[n[1]]=function(s){return this.$g(s,n[0],n[1])}}),h.extend=function(n,s){return n.$i||(n(s,d,h),n.$i=!0),h},h.locale=T,h.isDayjs=b,h.unix=function(n){return h(1e3*n)},h.en=f[$],h.Ls=f,h.p={},h})})(lt);const At=lt.exports;const Dt=U=>(yt("data-v-405ba1b7"),U=U(),wt(),U),St={class:"check-result"},xt={class:"result-list"},Tt={key:0,class:"token-list"},Ot={class:"item"},It={class:"right-content"},Yt={class:"content-item"},Lt={class:"left"},Ht={class:"right"},Nt={class:"content-item"},Vt={class:"left"},Wt={class:"right"},jt={class:"content-item"},Ut={class:"left"},Ft={class:"right"},Bt={class:"content-item"},Gt={class:"left"},Rt={class:"right"},zt={class:"operate"},Jt=Dt(()=>u("div",{class:"approve-count"},null,-1)),Zt={class:"cancel-approve"},Et={class:"check-all"},Pt={key:1,class:"NFT-list"},Qt={class:"comming-soon-text"},qt={class:"content"},Kt={class:"transfer-icon"},Xt={class:"title"},te={class:"btn"},ee={__name:"CheckResult",setup(U){const{t:M}=ht(),R=ft("global"),g=pt(),j=P([]),I=P(!1),Y=P(null),D=P([]),S=P(!1);function O(){let v=R.cfg.allowChainList.find(l=>l.chainId==g.chainId);for(let l of D.value)console.log(l),v?window.open(v.txNetwork+l,l):rt(M("unsupportedNetwork"))}function F(){}function C(){Y.value.toggleAll(I.value)}function K(v){v.length==g.approvalList.length?I.value=!0:I.value=!1}async function x(v){console.log(J);let l=await at.wallet.getAccount();if(J!=l){rt(M("switchWalletAddress"));return}if(!g.checkChainNet())return;console.log(v instanceof Array);let $=[];if(v instanceof Array)for(let f of v){let b=f.split("-")[0],T=f.split("-")[1],h=g.approvalList.find(r=>r.tokenAddress==b&&r.approvedContractAddress==T);$.push(h)}else{let f=v.split("-")[0],b=v.split("-")[1],T=g.approvalList.find(h=>h.tokenAddress==f&&h.approvedContractAddress==b);$.push(T)}console.log($),N($)}async function N(v){console.log(v),D.value=[];let l=[];for(let $ of v)try{let f=await at.wallet.approveMinAmount($.tokenAddress,$.approvedContractAddress);D.value.push(f.hash),l.push(f.wait())}catch{continue}D.value.length!=0&&(S.value=!0,Promise.all(l).then($=>{console.log($);let f=0;for(let b of $)b.status==1&&f++;f>0&&X()}))}const z=vt(),J=z.params.walletAddress,st=z.params.chainId;async function X(){const v=mt({forbidClick:!0,duration:0});await g.getApprovalList(st,J),v.close()}return _t(()=>{g.hasCheckData||X()}),(v,l)=>{const $=G("van-nav-bar"),f=G("van-image"),b=G("van-button"),T=G("van-checkbox"),h=G("van-checkbox-group"),r=G("van-dialog");return Q(),q(it,null,[u("div",St,[A($,{class:"nav-bar"},{title:H(()=>[A(kt,{type:m(g).approveType,"onUpdate:type":l[0]||(l[0]=d=>m(g).approveType=d),onSelectType:F},null,8,["type"])]),_:1}),u("div",xt,[m(g).approveType==0?(Q(),q("div",Tt,[A(h,{modelValue:j.value,"onUpdate:modelValue":l[2]||(l[2]=d=>j.value=d),ref_key:"checkboxGroup",ref:Y,onChange:K},{default:H(()=>[(Q(!0),q(it,null,$t(m(g).approvalList,d=>(Q(),q("div",Ot,[A(T,{class:"checkbox",name:d.tokenAddress+"-"+d.approvedContractAddress},{default:H(()=>[u("div",It,[u("div",Yt,[u("div",Lt,k(m(M)("approveToken")),1),u("div",Ht,[A(f,{class:"chain-icon",round:"",src:m(Ct)("bsc",d.tokenAddress.toLowerCase())},null,8,["src"]),u("div",null,k(`${d.tokenSymbol}(${m(ct)(d.tokenAddress)})`),1)])]),u("div",Nt,[u("div",Vt,k(m(M)("approveContract")),1),u("div",Wt,[A(f,{class:"chain-icon",round:"",src:m(bt)(d.approvedContractAddress.toLowerCase(),18)},null,8,["src"]),u("div",null,k(`(${m(ct)(d.approvedContractAddress)})`),1)])]),u("div",jt,[u("div",Ut,k(m(M)("approveQuantity")),1),u("div",Ft,k(d.approvedAmount),1)]),u("div",Bt,[u("div",Gt,k(m(M)("approveTime")),1),u("div",Rt,k(m(At).unix(d.approvedTime).format("YYYY-MM-DD HH:mm:ss")),1)]),u("div",zt,[Jt,u("div",Zt,[A(b,{class:"btn",plain:"",type:"primary",onClick:[nt=>x(d.tokenAddress+"-"+d.approvedContractAddress),l[1]||(l[1]=gt(()=>{},["stop"]))]},{default:H(()=>[et(k(m(M)("cancelApprove")),1)]),_:2},1032,["onClick"])])])])]),_:2},1032,["name"])]))),256))]),_:1},8,["modelValue"]),u("div",Et,[u("div",null,[A(T,{class:"checkbox",modelValue:I.value,"onUpdate:modelValue":l[3]||(l[3]=d=>I.value=d),onClick:C},{default:H(()=>[et(k(m(M)("checkAll")),1)]),_:1},8,["modelValue"]),A(b,{class:"btn",type:"primary",disabled:j.value.length==0,onClick:l[4]||(l[4]=d=>x(j.value))},{default:H(()=>[et(k(m(M)("batchCancel")),1)]),_:1},8,["disabled"])])])])):(Q(),q("div",Pt,[A(f,{class:"comming-soon-icon",src:"/assets/images/comming-soon.png"}),u("div",Qt,k(m(M)("comingSoon")),1)]))])]),A(r,{class:"approve-success-dialog",show:S.value,"onUpdate:show":l[5]||(l[5]=d=>S.value=d),onClose:l[6]||(l[6]=d=>S.value=!1),"close-on-click-overlay":""},{footer:H(()=>[u("div",te,[A(b,{class:"copy-btn",type:"primary",onClick:O},{default:H(()=>[et(k(m(M)("viewBlockChain")),1)]),_:1})])]),default:H(()=>[u("div",qt,[u("div",Kt,[A(Mt,{name:"createSuccess"})]),u("div",Xt,k(m(M)("cancelApproveWait")),1)])]),_:1},8,["show"])],64)}}},oe=dt(ee,[["__scopeId","data-v-405ba1b7"]]);export{oe as default};
